<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>FITbot</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <h1 class="sitename">FITbot</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#hero" class="active">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#gallery">Gallery</a></li>
          <li><a href="#team">Team</a></li>
          <li><a href="#pricing">Pricing</a></li>
          <li class="dropdown"><a href="#"><span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#">Dropdown 1</a></li>
              <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Deep Dropdown 1</a></li>
                  <li><a href="#">Deep Dropdown 2</a></li>
                  <li><a href="#">Deep Dropdown 3</a></li>
                  <li><a href="#">Deep Dropdown 4</a></li>
                  <li><a href="#">Deep Dropdown 5</a></li>
                </ul>
              </li>
              <li><a href="#">Dropdown 2</a></li>
              <li><a href="#">Dropdown 3</a></li>
              <li><a href="#">Dropdown 4</a></li>
            </ul>
          </li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <!-- Hero Section -->
    <section id="hero" class="hero section dark-background">
      <img src="assets/img/hero-bg-2.jpg" alt="" class="hero-bg">

      <div class="container">
        <div class="row gy-4 justify-content-between">
          <div class="col-lg-4 order-lg-last hero-img" data-aos="zoom-out" data-aos-delay="100">
            <img src="assets/img/heroine.png" class="img-fluid animated" alt="">
          </div>

          <div class="col-lg-6 d-flex flex-column justify-content-center" data-aos="fade-in">
            <h1>Welcome to <span>FITbot</span></h1>
            <p>Find your Perfect Fit</p>
            <div class="d-flex">
              <a href="#about" class="btn-get-started">Get Started</a>
            </div>
          </div>
        </div>
      </div>

      <svg class="hero-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none">
        <defs>
          <path id="wave-path" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
        </defs>
        <g class="wave1">
          <use xlink:href="#wave-path" x="50" y="3"></use>
        </g>
        <g class="wave2">
          <use xlink:href="#wave-path" x="50" y="0"></use>
        </g>
        <g class="wave3">
          <use xlink:href="#wave-path" x="50" y="9"></use>
        </g>
      </svg>
    </section><!-- /Hero Section -->

    <!-- About Section -->
    <section id="about" style="padding: 50px 0; background-color: #f9f9f9; text-align: center;">
      <div style="max-width: 800px; margin: auto; padding: 20px;">
        <h2 style="margin-bottom: 15px;">CHOOSE THE WAY OF YOUR MEASUREMENT</h2>
        <p style="font-size: 16px; color: #333;">
          Your height and weight are key factors in choosing the perfect size.
          With accurate measurements, we can recommend a fit that enhances
          both style and comfort!
        </p>

        <!-- Toggle Switch -->
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px;">
          <span style="font-size: 18px; font-weight: bold;">Manual Input</span>
          <label style="position: relative; width: 60px; height: 30px;">
            <input type="checkbox" id="toggleMethod" onchange="toggleMethod()" style="opacity: 0; width: 0; height: 0;">
            <span id="toggleSlider" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; border-radius: 30px; transition: 0.4s;"></span>
            <span id="toggleCircle" style="position: absolute; height: 22px; width: 22px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: 0.4s;"></span>
          </label>
          <span style="font-size: 18px; font-weight: bold;">Camera-Based</span>
        </div>

        <!-- Manual Input Form -->
        <div id="manualInputBox" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0,0,0,0.1);">
          <label for="heightUnit" style="font-weight: bold; display: block;">Select Unit for Height</label>
          <select id="heightUnit" onchange="toggleHeightUnit()" style="width: 100%; padding: 8px; margin-bottom: 10px;">
            <option value="cm" selected>Centimeters (cm)</option>
            <option value="ftin">Feet + Inches</option>
          </select>

          <!-- Height Input (CM) -->
          <div id="cmInputContainer">
            <label for="heightCm" style="font-weight: bold;">Height (cm)</label>
            <input type="number" id="heightCm" placeholder="Enter height in cm" style="width: 100%; padding: 8px; margin-bottom: 10px;">
          </div>

          <!-- Height Input (Feet + Inches) -->
          <div id="feetInchesContainer" style="display: none;">
            <label style="font-weight: bold;">Height (Feet + Inches)</label>
            <div style="display: flex; gap: 10px;">
              <input type="number" id="heightFeet" placeholder="Feet" style="width: 50%; padding: 8px;">
              <input type="number" id="heightInches" placeholder="Inches" style="width: 50%; padding: 8px;">
            </div>
          </div>

          <!-- Weight Input -->
          <label for="weight" style="font-weight: bold; margin-top: 10px; display: block;">Weight</label>
          <div style="display: flex; gap: 10px;">
            <input type="number" id="weight" placeholder="Enter weight" style="width: 70%; padding: 8px;">
            <select id="weightUnit" style="width: 30%; padding: 8px;">
              <option value="kg">kg</option>
              <option value="lbs">lbs</option>
            </select>
          </div>

          <!-- Gender Selection -->
          <label style="font-weight: bold; margin-top: 10px; display: block;">Select Gender</label>
          <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
            <input type="radio" id="male" name="gender" value="male" checked>
            <label for="male">Male</label>
            <input type="radio" id="female" name="gender" value="female">
            <label for="female">Female</label>
          </div>

          <!-- Submit Button -->
          <button style="background: green; color: white; width: 100%; padding: 10px; border: none; margin-top: 10px; cursor: pointer;">CONTINUE ></button>
        </div>

        <!-- Camera-Based Section (Initially Hidden) -->
        <div id="cameraBox" style="display: none; background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0,0,0,0.1); margin-top: 20px;">
          <h3>Use Camera to Detect Body Type</h3>
          <p>Click the button below to use your camera for automatic body type detection.</p>
          <button onclick="startCamera()" style="background: blue; color: white; padding: 10px; width: 100%; border: none; cursor: pointer;">Start Camera</button>
          <div id="cameraFeed" style="display: none; margin-top: 10px;">
            <video id="videoElement" width="100%" autoplay></video>
            <div id="results" style="margin-top: 10px; font-size: 16px;"></div>
          </div>
        </div>

        <!-- Body Type Selection Section (Initially Hidden) -->
        <div id="bodyTypeSection" style="display: none; margin-top: 20px;">
          <center><h2>Select Your Body Type</h2></center>
          <div class="container">
            <!-- Female Body Types -->
            <div class="image-button" onclick="selectImage(this, 'Hourglass')">
              <img src="assets/img/bt1f.jpg" alt="Hourglass">
              <p>Hourglass</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Diamond')">
              <img src="assets/img/bt2f.jpg" alt="Diamond">
              <p>Diamond</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Rectangle')">
              <img src="assets/img/bt3f.jpg" alt="Rectangle">
              <p>Rectangle</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Oval (Apple)')">
              <img src="assets/img/bt4f.jpg" alt="Oval (Apple)">
              <p>Oval (Apple)</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Inverted Triangle')">
              <img src="assets/img/bt5f.jpg" alt="Inverted Triangle">
              <p>Inverted Triangle</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Triangle (Pear)')">
              <img src="assets/img/bt6f.jpg" alt="Triangle (Pear)">
              <p>Triangle (Pear)</p>
            </div>

            <!-- Male Body Types -->
            <div class="image-button" onclick="selectImage(this, 'Hourglass')">
              <img src="assets/img/mbt1.jpg" alt="Hourglass">
              <p>Hourglass</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Diamond')">
              <img src="assets/img/mbt2.jpg" alt="Diamond">
              <p>Diamond</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Rectangle')">
              <img src="assets/img/mbt3.jpg" alt="Rectangle">
              <p>Rectangle</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Oval (Apple)')">
              <img src="assets/img/mbt4.jpg" alt="Oval (Apple)">
              <p>Oval (Apple)</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Inverted Triangle')">
              <img src="assets/img/mbt5.jpg" alt="Inverted Triangle">
              <p>Inverted Triangle</p>
            </div>
            <div class="image-button" onclick="selectImage(this, 'Triangle (Pear)')">
              <img src="assets/img/mbt6.jpg" alt="Triangle (Pear)">
              <p>Triangle (Pear)</p>
            </div>
          </div>

          <input type="text" id="selected-value" placeholder="Selected Body Type" readonly>
        </div>
      </div>
    </section><!-- /About Section -->

    <!-- JavaScript -->
    <script>
      let stream = null;
      let intervalId = null;
      let optimalData = null;

      function toggleMethod() {
        const manualInputBox = document.getElementById('manualInputBox');
        const cameraBox = document.getElementById('cameraBox');
        const toggle = document.getElementById('toggleMethod');
        const slider = document.getElementById('toggleSlider');
        const circle = document.getElementById('toggleCircle');

        if (toggle.checked) {
          manualInputBox.style.display = 'none';
          cameraBox.style.display = 'block';
          slider.style.backgroundColor = 'green';
          circle.style.transform = 'translateX(30px)';
        } else {
          manualInputBox.style.display = 'block';
          cameraBox.style.display = 'none';
          slider.style.backgroundColor = '#ccc';
          circle.style.transform = 'translateX(0)';
        }
      }

      function toggleHeightUnit() {
        const cmInputContainer = document.getElementById("cmInputContainer");
        const feetInchesContainer = document.getElementById("feetInchesContainer");
        const heightUnit = document.getElementById("heightUnit");

        if (heightUnit.value === "ftin") {
          cmInputContainer.style.display = "none";
          feetInchesContainer.style.display = "block";
        } else {
          cmInputContainer.style.display = "block";
          feetInchesContainer.style.display = "none";
        }
      }

      function startCamera() {
        const videoElement = document.getElementById("videoElement");
        const cameraFeed = document.getElementById("cameraFeed");

        cameraFeed.style.display = "block";

        navigator.mediaDevices.getUserMedia({ video: true })
          .then((stream) => {
            videoElement.srcObject = stream;
            startProcessing();
          })
          .catch((err) => {
            alert("Camera access denied! Please enable camera permissions.");
            console.error(err);
          });
      }

      function stopCamera() {
        const videoElement = document.getElementById("videoElement");
        if (videoElement.srcObject) {
          videoElement.srcObject.getTracks().forEach(track => track.stop());
          videoElement.srcObject = null;
        }
        clearInterval(intervalId);
        document.getElementById("results").innerHTML = "Camera stopped.";
      }

      async function startProcessing() {
        intervalId = setInterval(async () => {
          const videoElement = document.getElementById("videoElement");
          const canvas = document.createElement('canvas');
          canvas.width = videoElement.videoWidth;
          canvas.height = videoElement.videoHeight;
          const context = canvas.getContext('2d');
          context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);

          const imageData = canvas.toDataURL('image/jpeg').split(',')[1];

          try {
            const response = await fetch('http://localhost:5000/analyze', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({ image: imageData }),
            });

            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();

            if (data.error) {
              document.getElementById("results").textContent = "Error: " + data.error;
            } else {
              document.getElementById("results").innerHTML = `
                <p>Shoulder Width: ${data.measurements.shoulder_width} cm</p>
                <p>Chest Width: ${data.measurements.chest_width} cm</p>
                <p>Waist Width: ${data.measurements.waist_width} cm</p>
                <p>Hip Width: ${data.measurements.hip_width} cm</p>
                <p>Body Type: ${data.body_type}</p>
                <p>Body Size: ${data.body_size}</p>
              `;

              if (data.is_optimal_pose) {
                optimalData = data;
                stopCamera();
                document.getElementById("results").innerHTML += "<p>Optimal pose detected! Stable data captured.</p>";
              }
            }
          } catch (error) {
            document.getElementById("results").textContent = "Error: " + error.message;
          }
        }, 1000); // Process a frame every second
      }

      function toggleBodyTypeSection() {
        const section = document.getElementById("bodyTypeSection");
        if (section.style.display === "none") {
          section.style.display = "block";
        } else {
          section.style.display = "none";
        }
      }

      function selectImage(element, bodyType) {
        const buttons = document.querySelectorAll(".image-button");
        buttons.forEach(btn => btn.classList.remove("selected"));
        element.classList.add("selected");
        document.getElementById("selected-value").value = bodyType;
      }

      window.onload = function () {
        document.getElementById("cmInputContainer").style.display = "block";
        document.getElementById("feetInchesContainer").style.display = "none";
      };
    </script>
  </main>

  <footer id="footer" class="footer dark-background">
    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">FITbot</span>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>
</body>

</html>